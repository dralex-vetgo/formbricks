<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Widget</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2563eb;
            margin-bottom: 10px;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #2563eb;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .copy-btn:hover {
            background: #1d4ed8;
        }
        .copy-btn.copied {
            background: #10b981;
        }
        textarea {
            width: 100%;
            min-height: 200px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 12px;
            font-family: monospace;
            font-size: 13px;
            resize: vertical;
        }
        .demo-btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
        .demo-btn:hover {
            background: #1d4ed8;
        }
        .instructions {
            background: #eff6ff;
            border: 1px solid #dbeafe;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .instructions h3 {
            margin-top: 0;
            color: #1e40af;
        }
        .instructions ol {
            margin-bottom: 0;
        }
        .instructions li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AI Chat Widget –¥–ª—è Tilde</h1>
        <p>–≠—Ç–æ—Ç –≤–∏–¥–∂–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å AI-—á–∞—Ç –Ω–∞ –≤–∞—à —Å–∞–π—Ç –≤ Tilde.</p>

        <div class="instructions">
            <h3>üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è iPhone:</h3>
            <ol>
                <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥" –Ω–∏–∂–µ</li>
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ Tilde –≤ Safari</li>
                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
                <li>–î–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ "HTML-–∫–æ–¥" (T123)</li>
                <li>–í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥</li>
                <li>–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</li>
            </ol>
        </div>

        <div class="code-block">
            <button class="copy-btn" onclick="copyCode()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
            <textarea id="widgetCode" readonly><!-- AI Chat Widget -->
<style>
.chat-button{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background:#2563eb;border-radius:50%;box-shadow:0 4px 12px rgba(0,0,0,0.15);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;z-index:999}.chat-button:hover{transform:scale(1.1);box-shadow:0 6px 16px rgba(0,0,0,0.2)}.chat-button svg{width:30px;height:30px;fill:white}.chat-container{position:fixed;bottom:90px;right:20px;width:380px;height:600px;background:white;border-radius:12px;box-shadow:0 5px 30px rgba(0,0,0,0.15);display:none;flex-direction:column;z-index:1000;overflow:hidden}.chat-container.active{display:flex;animation:slideUp 0.3s ease}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.chat-header{background:#2563eb;color:white;padding:20px;display:flex;align-items:center;justify-content:space-between}.chat-header h3{margin:0;font-size:18px;font-weight:600}.close-button{background:none;border:none;color:white;cursor:pointer;padding:5px;transition:opacity 0.2s}.close-button:hover{opacity:0.8}.close-button svg{width:24px;height:24px}.chat-messages{flex:1;overflow-y:auto;padding:20px;background:#f9fafb}.message{margin-bottom:16px;display:flex;animation:fadeIn 0.3s ease}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.message.user{justify-content:flex-end}.message-content{max-width:70%;padding:12px 16px;border-radius:12px;word-wrap:break-word}.message.user .message-content{background:#2563eb;color:white;border-bottom-right-radius:4px}.message.bot .message-content{background:white;color:#1f2937;border:1px solid #e5e7eb;border-bottom-left-radius:4px}.typing-indicator{display:none;padding:12px 16px;background:white;border:1px solid #e5e7eb;border-radius:12px;border-bottom-left-radius:4px;width:fit-content}.typing-indicator.active{display:block}.typing-indicator span{display:inline-block;width:8px;height:8px;border-radius:50%;background:#9ca3af;margin:0 2px;animation:typing 1.4s infinite}.typing-indicator span:nth-child(2){animation-delay:0.2s}.typing-indicator span:nth-child(3){animation-delay:0.4s}@keyframes typing{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-10px)}}.chat-input-form{padding:20px;background:white;border-top:1px solid #e5e7eb;display:flex;gap:10px}.chat-input{flex:1;padding:12px 16px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;outline:none;transition:border-color 0.2s}.chat-input:focus{border-color:#2563eb}.send-button{background:#2563eb;color:white;border:none;border-radius:8px;padding:12px 20px;cursor:pointer;transition:background 0.2s;display:flex;align-items:center;justify-content:center}.send-button:hover{background:#1d4ed8}.send-button:disabled{background:#9ca3af;cursor:not-allowed}.send-button svg{width:20px;height:20px}@media (max-width:480px){.chat-container{width:100%;height:100%;bottom:0;right:0;border-radius:0}.chat-button{bottom:10px;right:10px}}
</style>

<div class="chat-button" onclick="toggleChat()">
    <svg viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12c0 1.54.36 3 .97 4.29L1 23l6.71-1.97C9 21.64 10.46 22 12 22c5.52 0 10-4.48 10-10S17.52 2 12 2zm0 18c-1.41 0-2.73-.36-3.88-.98l-.28-.14-2.92.77.79-2.89-.18-.29C4.91 14.73 4.55 13.38 4.55 12c0-4.42 3.58-8 8-8s8 3.58 8 8-3.58 8-8 8z"/>
    </svg>
</div>

<div class="chat-container" id="chatContainer">
    <div class="chat-header">
        <h3>AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h3>
        <button class="close-button" onclick="toggleChat()">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
        </button>
    </div>
    <div class="chat-messages" id="chatMessages">
        <div class="message bot">
            <div class="message-content">–ü—Ä–∏–≤–µ—Ç! –Ø AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?</div>
        </div>
    </div>
    <form class="chat-input-form" onsubmit="sendMessage(event)">
        <input type="text" class="chat-input" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off"/>
        <button type="submit" class="send-button" id="sendButton">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </button>
    </form>
</div>

<script>
const WEBHOOK_URL='https://api-vps.vetgo.pro/webhook/deba7512-bb08-45f7-bc15-b819b1abca23/chat';
let sessionId='session_'+Date.now()+'_'+Math.random().toString(36).substr(2,9);
let isProcessing=false;
function toggleChat(){document.getElementById('chatContainer').classList.toggle('active');if(document.getElementById('chatContainer').classList.contains('active')){document.getElementById('chatInput').focus()}}
function addMessage(content,isUser=false){const messagesContainer=document.getElementById('chatMessages');const messageDiv=document.createElement('div');messageDiv.className='message '+(isUser?'user':'bot');const contentDiv=document.createElement('div');contentDiv.className='message-content';contentDiv.textContent=content;messageDiv.appendChild(contentDiv);messagesContainer.appendChild(messageDiv);messagesContainer.scrollTop=messagesContainer.scrollHeight}
function showTypingIndicator(){const messagesContainer=document.getElementById('chatMessages');const typingDiv=document.createElement('div');typingDiv.className='message bot';typingDiv.id='typingIndicator';const indicatorDiv=document.createElement('div');indicatorDiv.className='typing-indicator active';indicatorDiv.innerHTML='<span></span><span></span><span></span>';typingDiv.appendChild(indicatorDiv);messagesContainer.appendChild(typingDiv);messagesContainer.scrollTop=messagesContainer.scrollHeight}
function removeTypingIndicator(){const indicator=document.getElementById('typingIndicator');if(indicator){indicator.remove()}}
async function sendMessage(event){event.preventDefault();if(isProcessing)return;const input=document.getElementById('chatInput');const sendButton=document.getElementById('sendButton');const message=input.value.trim();if(!message)return;addMessage(message,true);input.value='';isProcessing=true;sendButton.disabled=true;showTypingIndicator();try{const response=await fetch(WEBHOOK_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({sessionId:sessionId,action:'sendMessage',chatInput:message})});if(!response.ok){throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞')}const data=await response.json();removeTypingIndicator();const botResponse=data.output||data.message||'–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.';addMessage(botResponse)}catch(error){console.error('–û—à–∏–±–∫–∞:',error);removeTypingIndicator();addMessage('–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.')}finally{isProcessing=false;sendButton.disabled=false;input.focus()}}
document.getElementById('chatInput').addEventListener('keypress',function(e){if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();document.querySelector('.chat-input-form').dispatchEvent(new Event('submit'))}});
</script></textarea>
        </div>

        <button class="demo-btn" onclick="showDemo()">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ–º–æ</button>

        <div id="demoContainer"></div>
    </div>

    <script>
        function copyCode() {
            const textarea = document.getElementById('widgetCode');
            const button = document.querySelector('.copy-btn');
            
            // –î–ª—è iOS –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥
            if (navigator.userAgent.match(/ipad|iphone/i)) {
                const range = document.createRange();
                range.selectNodeContents(textarea);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
                textarea.setSelectionRange(0, 999999);
            } else {
                textarea.select();
            }
            
            try {
                document.execCommand('copy');
                button.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥';
                    button.classList.remove('copied');
                }, 2000);
            } catch (err) {
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –í—ã–¥–µ–ª–∏—Ç–µ –∫–æ–¥ –≤—Ä—É—á–Ω—É—é –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ.');
            }
            
            // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            if (window.getSelection) {
                window.getSelection().removeAllRanges();
            }
        }

        function showDemo() {
            const container = document.getElementById('demoContainer');
            container.innerHTML = document.getElementById('widgetCode').value;
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –¥–µ–º–æ
            setTimeout(() => {
                container.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }
    </script>
</body>
</html>